How I reduce Docker image size (staging / prod)
Keeping Docker images small makes everything smoother. Builds are faster, images pull quicker, and deployments feel less painful. These are the habits I follow when writing Dockerfiles for staging and production.

First thing I always do: .dockerignore

This is the biggest and easiest win.

If you don’t use .dockerignore, Docker will happily copy everything from your project directory into the image, including things you never want in production.

I usually ignore:

git folder

Python cache

logs

tests

virtual environments

node_modules

.env files

Once this is in place, Docker only sees what the app actually needs.

Base image choice matters a lot

By default, many people use full images without thinking about it.

For Python, I avoid the full image unless there is a strong reason.
I use the slim version instead.

Same Python version.
Much smaller image.
No change to application code.

This single change often cuts image size drastically.

Multi-stage builds are the real production move

This is how production Dockerfiles are usually written.

The idea is simple:
You don’t need build tools at runtime.

So I split the Dockerfile into two stages.

In the first stage:

install build tools

compile dependencies

build wheels or artifacts

In the final stage:

copy only what is needed to run the app

no compilers

no dev headers

no unnecessary tooling

This keeps the final image clean, smaller, and safer.

Reduce layers and clean up after installs

Every Docker instruction creates a layer, so I try to keep them minimal.

I combine package installs into a single command and always clean up afterwards.
I also disable pip caching when installing Python dependencies.

This avoids leaving behind package lists, cache files, and temp data that only add size.

Final thought

If you do just these four things:

use .dockerignore

use slim base images

use multi-stage builds

clean up layers and caches
=====================================================================================================================================
